# Migration `20201007145002-builds-counter`

This migration has been generated by Pavel Strunkin at 10/7/2020, 5:50:02 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Project" ADD COLUMN "buildsCounter" integer   NOT NULL DEFAULT 0
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200909223305-test-variation-project-id-added-into-unique-constraint..20201007145002-builds-counter
--- datamodel.dml
+++ datamodel.dml
@@ -1,15 +1,16 @@
 generator client {
   provider = "prisma-client-js"
+  previewFeatures = ["atomicNumberOperations"]
 }
 datasource db {
-  provider = "postgresql"
-  url = "***"
+  provider        = "postgresql"
+  url = "***"
 }
 model Build {
-  id         String    @default(uuid()) @id
+  id         String    @id @default(uuid())
   number     Int?
   branchName String?
   status     String?
   testRuns   TestRun[]
@@ -22,21 +23,22 @@
   isRunning  Boolean?
 }
 model Project {
-  id             String          @default(uuid()) @id
+  id             String          @id @default(uuid())
   name           String
   mainBranchName String          @default("master")
   builds         Build[]
+  buildsCounter  Int             @default(0)
   testVariations TestVariation[]
   updatedAt      DateTime        @updatedAt
   createdAt      DateTime        @default(now())
   @@unique([name])
 }
 model TestRun {
-  id                    String        @default(uuid()) @id
+  id                    String        @id @default(uuid())
   imageName             String
   diffName              String?
   diffPercent           Float?
   diffTollerancePercent Float         @default(0)
@@ -63,9 +65,9 @@
   baselineBranchName    String?
 }
 model TestVariation {
-  id           String     @default(uuid()) @id
+  id           String     @id @default(uuid())
   name         String
   branchName   String     @default("master")
   browser      String?
   device       String?
@@ -84,9 +86,9 @@
   @@unique([projectId, name, browser, device, os, viewport, branchName])
 }
 model Baseline {
-  id              String        @default(uuid()) @id
+  id              String        @id @default(uuid())
   baselineName    String
   testVariationId String
   testVariation   TestVariation @relation(fields: [testVariationId], references: [id])
   testRunId       String?
@@ -95,9 +97,9 @@
   createdAt       DateTime      @default(now())
 }
 model User {
-  id        String   @default(uuid()) @id
+  id        String   @id @default(uuid())
   email     String   @unique
   password  String
   firstName String?
   lastName  String?
```


