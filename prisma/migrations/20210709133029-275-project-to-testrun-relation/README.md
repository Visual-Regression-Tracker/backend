# Migration `20210709133029-275-project-to-testrun-relation`

This migration has been generated by Pavel Strunkin at 7/9/2021, 4:30:29 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "TestRun" ADD COLUMN     "projectId" TEXT

ALTER TABLE "TestRun" ADD FOREIGN KEY("projectId")REFERENCES "Project"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210709115233-gh-275-max-branch-lifetime..20210709133029-275-project-to-testrun-relation
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Build {
   id         String    @id @default(uuid())
@@ -40,8 +40,9 @@
   autoApproveFeature    Boolean         @default(false)
   imageComparison       ImageComparison @default(pixelmatch)
   imageComparisonConfig String          @default("{ \"threshold\": 0.1, \"ignoreAntialiasing\": true, \"allowDiffDimensions\": false }")
+  TestRun TestRun[]
   @@unique([name])
 }
 model TestRun {
@@ -55,8 +56,10 @@
   buildId               String
   build                 Build          @relation(fields: [buildId], references: [id])
   testVariationId       String?
   testVariation         TestVariation? @relation(fields: [testVariationId], references: [id])
+  projectId             String?
+  project               Project?       @relation(fields: [projectId], references: [id])
   merge                 Boolean        @default(false)
   updatedAt             DateTime       @updatedAt
   createdAt             DateTime       @default(now())
   // Test variation data
```


