# Migration `20210425111448-github_215_project_config`

This migration has been generated by Pavel Strunkin at 4/25/2021, 2:14:48 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "public"."ImageComparison" AS ENUM ('pixelmatch', 'lookSame', 'odiff')

ALTER TABLE "Project" ADD COLUMN     "autoApproveFeature" BOOLEAN NOT NULL DEFAULT false,
ADD COLUMN     "diffDimensionsFeature" BOOLEAN NOT NULL DEFAULT false,
ADD COLUMN     "imageComparison" "ImageComparison" NOT NULL DEFAULT E'pixelmatch'

ALTER TABLE "TestVariation" ALTER COLUMN "browser" SET NOT NULL,
ALTER COLUMN "browser" SET DEFAULT E'',
ALTER COLUMN "device" SET NOT NULL,
ALTER COLUMN "device" SET DEFAULT E'',
ALTER COLUMN "os" SET NOT NULL,
ALTER COLUMN "os" SET DEFAULT E'',
ALTER COLUMN "viewport" SET NOT NULL,
ALTER COLUMN "viewport" SET DEFAULT E''
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210405171118-github_243-set-empty-test-variation-tags-instead-of-null..20210425111448-github_215_project_config
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Build {
   id         String    @id @default(uuid())
@@ -25,16 +25,20 @@
   @@unique([projectId, ciBuildId])
 }
 model Project {
-  id             String          @id @default(uuid())
-  name           String
-  mainBranchName String          @default("master")
-  builds         Build[]
-  buildsCounter  Int             @default(0)
-  testVariations TestVariation[]
-  updatedAt      DateTime        @updatedAt
-  createdAt      DateTime        @default(now())
+  id                    String          @id @default(uuid())
+  name                  String
+  mainBranchName        String          @default("master")
+  builds                Build[]
+  buildsCounter         Int             @default(0)
+  testVariations        TestVariation[]
+  updatedAt             DateTime        @updatedAt
+  createdAt             DateTime        @default(now())
+  // config
+  autoApproveFeature    Boolean         @default(false)
+  diffDimensionsFeature Boolean         @default(false)
+  imageComparison       ImageComparison @default(pixelmatch)
   @@unique([name])
 }
@@ -120,4 +124,10 @@
   unresolved
   approved
   autoApproved
 }
+
+enum ImageComparison {
+  pixelmatch
+  lookSame
+  odiff
+}
```


