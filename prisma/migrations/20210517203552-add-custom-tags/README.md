# Migration `20210517203552-add-custom-tags`

This migration has been generated by Surat Das at 5/17/2021, 1:35:52 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "TestVariation.projectId_name_browser_device_os_viewport_branchN"

ALTER TABLE "TestRun" ADD COLUMN     "customTags" TEXT DEFAULT E''

ALTER TABLE "TestVariation" ADD COLUMN     "customTags" TEXT NOT NULL DEFAULT E''

CREATE UNIQUE INDEX "TestVariation.projectId_name_browser_device_os_viewport_customTags_branchName_unique" ON "TestVariation"("projectId", "name", "browser", "device", "os", "viewport", "customTags", "branchName")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210425191116-github_215_project_config..20210517203552-add-custom-tags
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Build {
   id         String    @id @default(uuid())
@@ -64,8 +64,9 @@
   browser               String?
   device                String?
   os                    String?
   viewport              String?
+  customTags            String?        @default("")
   baselineName          String?
   comment               String?
   baseline              Baseline?
   branchName            String         @default("master")
@@ -81,8 +82,9 @@
   browser      String     @default("")
   device       String     @default("")
   os           String     @default("")
   viewport     String     @default("")
+  customTags   String     @default("")
   baselineName String?
   ignoreAreas  String     @default("[]")
   projectId    String
   project      Project    @relation(fields: [projectId], references: [id])
@@ -91,9 +93,9 @@
   comment      String?
   updatedAt    DateTime   @updatedAt
   createdAt    DateTime   @default(now())
-  @@unique([projectId, name, browser, device, os, viewport, branchName])
+  @@unique([projectId, name, browser, device, os, viewport, customTags, branchName])
 }
 model Baseline {
   id              String        @id @default(uuid())
```


