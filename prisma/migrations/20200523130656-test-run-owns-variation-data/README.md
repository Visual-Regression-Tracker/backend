# Migration `20200523130656-test-run-owns-variation-data`

This migration has been generated by Pavel Strunkin at 5/23/2020, 1:06:56 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."TestRun" ADD COLUMN "baselineName" text   ,
ADD COLUMN "browser" text   ,
ADD COLUMN "device" text   ,
ADD COLUMN "ignoreAreas" text  NOT NULL DEFAULT '[]',
ADD COLUMN "name" text  NOT NULL DEFAULT '',
ADD COLUMN "os" text   ,
ADD COLUMN "viewport" text   ;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200503001556-init..20200523130656-test-run-owns-variation-data
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model Build {
   id         String    @default(uuid()) @id
@@ -14,12 +14,12 @@
   status     String?
   testRuns   TestRun[]
   projectId  String
   project    Project   @relation(fields: [projectId], references: [id])
-  // userId     String
-  // user       User      @relation(fields: [userId], references: [id])
   updatedAt  DateTime  @updatedAt
   createdAt  DateTime  @default(now())
+  user       User?     @relation(fields: [userId], references: [id])
+  userId     String?
 }
 model Project {
   id             String          @default(uuid()) @id
@@ -43,8 +43,16 @@
   testVariationId       String
   testVariation         TestVariation @relation(fields: [testVariationId], references: [id])
   updatedAt             DateTime      @updatedAt
   createdAt             DateTime      @default(now())
+  // Test variation data
+  name                  String        @default("")
+  browser               String?
+  device                String?
+  os                    String?
+  viewport              String?
+  baselineName          String?
+  ignoreAreas           String        @default("[]")
 }
 model TestVariation {
   id           String    @default(uuid()) @id
```


