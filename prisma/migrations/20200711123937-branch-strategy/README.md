# Migration `20200711123937-branch-strategy`

This migration has been generated by Pavel Strunkin at 7/11/2020, 12:39:37 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Project" ADD COLUMN "mainBranchName" text  NOT NULL DEFAULT E'master';

ALTER TABLE "public"."TestRun" ADD COLUMN "branchName" text  NOT NULL DEFAULT E'master';

ALTER TABLE "public"."TestVariation" ADD COLUMN "branchName" text  NOT NULL DEFAULT E'master';
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200707182652-project-name-unique-constraint..20200711123937-branch-strategy
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model Build {
   id         String    @default(uuid()) @id
@@ -23,8 +23,9 @@
 model Project {
   id             String          @default(uuid()) @id
   name           String
+  mainBranchName String          @default("master")
   builds         Build[]
   testVariations TestVariation[]
   updatedAt      DateTime        @updatedAt
   createdAt      DateTime        @default(now())
@@ -55,8 +56,9 @@
   baselineName          String?
   ignoreAreas           String        @default("[]")
   comment               String?
   baseline              Baseline?
+  branchName            String        @default("master")
 }
 model TestVariation {
   id           String     @default(uuid()) @id
@@ -71,8 +73,9 @@
   project      Project    @relation(fields: [projectId], references: [id])
   testRuns     TestRun[]
   baselines    Baseline[]
   comment      String?
+  branchName   String     @default("master")
   updatedAt    DateTime   @updatedAt
   createdAt    DateTime   @default(now())
 }
```


